!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n.r(t);var i,r=function(e,t,n,o,i){var r=new XMLHttpRequest;return"function"==typeof i&&(r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var e;try{e=JSON.parse(r.response)}catch(e){return e}i.call(null,e)}}),r.open(n,e,!0),r.timeout=o,r.withCredentials=!0,r.send(t),!0},a=function(e){var t=(+new Date).toString(10),n=document.location&&"https:"===document.location.protocol?"https:":"http:";return"".concat(n,"//").concat(i.endpoint,"/").concat(e,"/").concat(i.apiKey,"/").concat(i.deviceId,"/1/").concat(t,"/")},c=!0,d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=t}var t,n,d;return t=e,(n=[{key:"emit",value:function(e){var t={sdk:{name:i.sdkName,version:i.sdkVersion},beacons:[e]},n=a("ingest"),o=btoa(JSON.stringify(t));if("GET"===i.method&&(n+="?body=".concat(encodeURIComponent(o)),o=""),"sendBeacon"in navigator&&"function"==typeof navigator.sendBeacon&&!0===c){try{navigator.sendBeacon(n,o)}catch(e){c=!1}if(c)if("fetch"in window[i.target]&&"function"==typeof window[i.target].fetch){var d=new AbortController,u={signal:d.signal,method:i.method,cache:"no-store",keepalive:!0};"POST"===i.method&&(u.body=o),setTimeout(function(){return d.abort()},i.timeout),window[i.target].fetch(n,u)}else r(n,o,i.method,i.timeout)}else r(n,o,i.method,i.timeout)}},{key:"getDeviceId",value:function(e){var t=a("sync");if(t+="?name=".concat(i.prefix,"Id"),"fetch"in window[i.target]&&"function"==typeof window[i.target].fetch&&"AbortController"in window[i.target]&&"function"==typeof window[i.target].AbortController){var n=new AbortController,o={signal:n.signal,method:"GET",cache:"no-store",keepalive:!0};setTimeout(function(){return n.abort()},i.timeout),window[i.target].fetch(t,o).then(function(e){return e.json()}).then(function(t){e.call(null,t.id)})}else r(t,"","GET",i.timeout,function(t){e.call(null,t.id)})}}])&&o(t.prototype,n),d&&o(t,d),e}();function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var l={},s=0,f=function(){function e(t){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);try{n=new CustomEvent(t.eventName)}catch(e){(n=window.parent.document.createEvent("CustomEvent")).initCustomEvent(t.eventName,!1,!1,{})}window.parent.requestAnimationFrame=window.parent.requestAnimationFrame||window.parent.mozRequestAnimationFrame||window.parent.webkitRequestAnimationFrame,function e(){if(window.parent.requestAnimationFrame(e),o)return!1;o=setTimeout(function(){window.parent.dispatchEvent(n),o=null},t.eventFrequency)}()}var t,n,o;return t=e,(n=[{key:"addListener",value:function(e,t,n,o){return e.addEventListener(t,n,o),l[s]={element:e,type:t,listener:n,capture:o},s++}},{key:"removeListener",value:function(e){if(e in l){var t=l[e];t.element.removeEventListener(t.type,t.listener,t.capture)}}}])&&u(t.prototype,n),o&&u(t,o),e}();function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var m,v,h=function(){for(var e=(+new Date).toString(36),t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",o=0;o<32;o++)n+=t[Math.floor(Math.random()*t.length)];return"".concat(e,"-").concat(n)},w=function(){var e,t,n,o=(e=m,t=window.parent.document.cookie||"",("; ".concat(t,";").match("; ".concat(e,"=([^Â¥S;]*)"))||[])[1]||""),i=localStorage.getItem(m)||"";return o.length>8?n=o:i.length>8?n=i:(n=v,g=!0),n},g=!1,y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v=h(),m="".concat(t.prefix,"-id"),this.deviceId=w(),this.rootId=v,this.isNewId=g}var t,n,o;return t=e,(n=[{key:"setDeviceId",value:function(e){this.deviceId=e;try{localStorage.setItem(m,e)}catch(t){window.parent.document.cookie="".concat(m,"=").concat(e,"; Path=/; Max-Age=31536000; SameSite=Lax")}}}])&&p(t.prototype,n),o&&p(t,o),e}();function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"getPerformanceInfo",value:function(){var e=window.performance.timing,t=e.domInteractive-e.domLoading,n=e.domContentLoadedEventStart-e.domLoading,o=e.domComplete-e.domLoading;return{interactive:t>=0?t:void 0,dcl:n>=0?n:void 0,complete:o>=0?o:void 0}}},{key:"getClientInfo",value:function(e){var t=screen.orientation||screen.mozOrientation||screen.msOrientation;return{viewportHeight:window[e].innerHeight,viewportWidth:window[e].innerWidth,screenHeight:window[e].screen.height,screenWidth:window[e].screen.width,screenOrientation:t}}},{key:"getMediaInfo",value:function(e){return!!e&&{src:e.src,currentTime:Math.round(10*e.currentTime)/10,duration:Math.round(10*e.duration)/10,playedPercent:Math.round(e.currentTime/e.duration*1e3)/10,attr:{type:e.type||void 0,width:e.clientWidth||void 0,height:e.clientHeight||void 0,muted:e.muted||!1,defaultMuted:e.defaultMuted||!1,autoplay:e.autoplay||!1,playerId:e.playerId||void 0,dataset:e.dataset}}}},{key:"getVisibility",value:function(e,t){var n=0,o={};try{o=e.getBoundingClientRect(),n=e.innerText.length}catch(e){o={}}var i=window[t].innerHeight,r=window[t].document.documentElement.scrollHeight,a=window[t].document.visibilityState||"unknown",c="pageYOffset"in window[t]?window[t].pageYOffset:(window[t].document.documentElement||window[t].document.body.parentNode||window[t].document.body).scrollTop,d=c+i,u=o.height,l=o.top<=0?0:o.top,s=-1*(o.bottom-i)<=0?0:-1*(o.bottom-i),f=d,p=d/r,m=null,v=null,h=!1;return o.top>=0&&o.bottom>i&&o.top>=i?(m=null,v=null,h=!1):o.top>=0&&o.bottom>i&&o.top<i?(m=0,v=i-o.top,h=!0):o.top<0&&o.bottom>i?(v=(m=-1*o.top)+i,h=!0):o.top>=0&&o.bottom<=i?(m=0,v=u,h=!0):o.top<0&&o.bottom>=0&&o.bottom<=i?(m=u+o.top,v=u,h=!0):o.top<0&&o.bottom<0?(m=null,v=null,h=!1):h=!1,{dHeight:r,dIsVisible:a,dVisibleTop:c,dVisibleBottom:d,dScrollUntil:f,dScrollRate:p,tHeight:u,tVisibleTop:m,tVisibleBottom:v,tMarginTop:l,tMarginBottom:s,tScrollUntil:v,tScrollRate:v/u,tViewableRate:(v-m)/u,tIsInView:h,tLength:n}}},{key:"queryMatch",value:function(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data-trackable",i="button",r=[];for(3===t.nodeType&&(t=t.parentNode);t&&t!==window.parent.document;){var a=(t.matches||t.msMatchesSelector||function(){return!1}).bind(t);t.hasAttribute(o)&&r.unshift(t.getAttribute(o)),!n&&a(e)&&(i="a"===t.tagName.toLowerCase()?"link":t.tagName.toLowerCase(),n=t),t=t.parentNode}return!!(n&&r.length>0)&&{element:n,category:i,path:r.join(">")}}},{key:"mergeObj",value:function(e){for(var t={},n=0;n<e.length;n++)for(var o in e[n])"object"!==b(e[n][o])||null===e[n][o]||Array.isArray(e[n][o])?Array.isArray(e[n][o])?t[o]=t[o]?t[o].concat(e[n][o]):e[n][o]:t[o]=e[n][o]:t[o]=t[o]?this.mergeObj([t[o],e[n][o]]):e[n][o];return t}},{key:"parseUrl",value:function(e){var t,n={},o=document.createElement("a");return e&&(o.href=e,t=o.search.slice(1).split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{}),n={protocol:o.protocol,hostname:o.hostname,port:o.port,pathname:o.pathname,search:o.search,hash:o.hash,query:t}),n}}])&&k(t.prototype,n),o&&k(t,o),e}();function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var L,M,T,A,C,O,N,P=new Date,E={media:[]},j=new Date,V=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataModel={}}var t,n,o;return t=e,(n=[{key:"config",value:function(e){L=e,O=new I,T=new y({prefix:L.prefix,target:L.targetWindow}),A=new d({endpoint:L.endpoint,apiKey:L.apiKey,sdkName:"JS",sdkVersion:"0.4.0",method:L.method,timeout:L.timeout,prefix:L.prefix,deviceId:T.deviceId,rootId:T.rootId,target:L.targetWindow}),M=L.targetWindow,N=O.parseUrl(window[M].document.location.href)}},{key:"init",value:function(e){this.dataModel=e,L.eventName&&L.eventFrequency&&void 0===C&&(C=new f({eventName:L.eventName,eventFrequency:L.eventFrequency})),"performance"in window[M]&&("interactive"===window[M].document.readyState||"complete"===window[M].document.readyState?this.trackAction("rum","page",{}):this.trackPerformance(M)),L.options&&L.options.unload&&L.options.unload.enable&&this.trackUnload(M),L.options&&L.options.scroll&&L.options.scroll.enable&&this.trackScroll(L.options.scroll.granularity,L.options.scroll.threshold,L.options.scroll.unit,L.eventName),L.options&&L.options.read&&L.options.read.enable&&this.trackRead(L.options.read.granularity,L.options.read.threshold,L.options.read.target,L.eventName),L.options&&L.options.clicks&&L.options.clicks.enable&&this.trackClicks(L.options.clicks.targetAttr),L.options&&L.options.media&&L.options.media.enable&&this.trackMedia(L.options.media.heartbeat)}},{key:"trackAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=new Date,i=O.mergeObj([this.dataModel,n,{action:e,category:t,client:O.getClientInfo(M),performance:O.getPerformanceInfo(),sinceInitMs:o.getTime()-P.getTime(),sincePrevMs:o.getTime()-j.getTime()}]);j=o,A.emit(i),T.isNewId?A.getDeviceId(function(e){T.setDeviceId(e),T.isNewId=!1}):T.setDeviceId(T.deviceId)}},{key:"trackPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trackAction("view","page",e)}},{key:"trackPerformance",value:function(){var e=this;C.removeListener(E.performance),E.performance=C.addListener(window[M].document,"DOMContentLoaded",function(){e.trackAction("rum","page",{})},!1)}},{key:"trackUnload",value:function(){var e,t=this;e="onbeforeunload"in window[M]?"beforeunload":"onpagehide"in window[M]?"pagehide":"unload",C.removeListener(E.unload),E.unload=C.addListener(window[M],e,function(){t.trackAction("unload","page",{})},!1)}},{key:"trackClicks",value:function(e){var t=this;C.removeListener(E.click),E.click=C.addListener(window[M].document.body,"click",function(n){var o=e||"data-trackable",i=O.queryMatch('a, button, input, [role="button"]',n.target,o),r=null;i&&(r=i.element,t.trackAction("click",i.category,{click:{tag:r.tagName,id:r.id||void 0,class:r.className||void 0,path:i.path||void 0,link:r.href||void 0,attr:r.dataset||void 0}}))},!1)}},{key:"trackScroll",value:function(e,t,n,o){var i=this,r=e||20,a=100/r,c=1e3*t||2e3,d={},u=0,l=0,s="percent";C.removeListener(E.scroll),E.scroll=C.addListener(window[M],o,function(){"hidden"!==(d=O.getVisibility(null,M)).dIsVisible&&"prerender"!==d.dIsVisible&&("percent"===n?u=Math.floor(d.dScrollRate*a)*r:(u=d.dScrollUntil,s="pixel"),("percent"===s&&u>l&&u>=0&&u<=100||"pixel"===s&&u>l&&u>=r)&&setTimeout(function(){u>l&&(i.trackAction("scroll","page",{scroll:{pageHeight:d.dHeight,depth:u,unit:s}}),l="percent"===s?u:u+r)},c))},!1)}},{key:"trackRead",value:function(e,t,n,o){var i=this;if(n){var r=e||20,a=100/r,c=1e3*t||2e3,d={},u=0,l=0;C.removeListener(E.read),E.read=C.addListener(window[M],o,function(){"hidden"!==(d=O.getVisibility(n,M)).dIsVisible&&"prerender"!==d.dIsVisible&&d.tIsInView&&(u=Math.floor(d.tScrollRate*a)*r)>l&&u>=0&&u<=100&&setTimeout(function(){u>l&&(i.trackAction("read","content",{read:{targetHeight:d.tHeight,textLength:d.tLength,readRate:u}}),l=u)},c)},!1)}}},{key:"trackMedia",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=["play","pause","ended"],o={},i=0;i<n.length;i++)C.removeListener(E.media[n[i]]),E.media[n[i]]=C.addListener(window[M].document.body,n[i],function(t){e.trackAction(t.type,t.target.tagName.toLowerCase(),{media:O.getMediaInfo(t.target)})},{capture:!0});C.removeListener(E.media.timeupdate),E.media.timeupdate=C.addListener(window[M].document,"timeupdate",function(n){if(o[n.target.src])return!1;o[n.target.src]=setTimeout(function(){!0!==n.target.paused&&!0!==n.target.ended&&e.trackAction(n.type,n.target.tagName.toLowerCase(),{media:O.getMediaInfo(n.target)}),o[n.target.src]=!1},1e3*t)},{capture:!0})}},{key:"getQueryVal",value:function(e){return N.query[e]?N.query[e]:""}}])&&S(t.prototype,n),o&&S(t,o),e}();window.Polytrek=new V}]);